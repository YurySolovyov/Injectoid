(function(f,c){"function"===typeof define&&define.amd?define(["exports"],c):"object"===typeof exports?c(exports):c(f)})(this,function(f){f.Injectoid=function(){var c=this,f=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,g={},d={},n=[],h=function(a){return a.toString().match(f)[1].split(/\s*,\s*/gi).filter(function(a){return a&&0<a.length})},k=function(a){return a.map(function(a){return g[a]})},l=function(a){return a.every(function(a){return g.hasOwnProperty(a)})},m=function(a,b){return b.apply(null,a)},p=function(a,
b,e){e=e||[];b.forEach(function(b){var c=d[b];if(c){c=h(c);e=e.concat(c);if(-1<e.indexOf(a))throw Error("Circular dependency detected: "+a+" <=> "+b);p(a,c,e)}})},t=function(){n.forEach(function(a){var b=a.args;l(b)&&m(k(b),a.callback)})},r=function(){Object.keys(d).forEach(function(a){var b=d[a];b&&q(a,b)})},q=function(a,b){if("function"===typeof b){var c=h(b);p(a,c);l(c)?(c=m(k(c),b),delete d[a],g[a]=c,r()):d[a]=b}else delete d[a],g[a]=b,r();t()};c.provide=function(a,b){q(a,b);return c};c.run=function(a){var b=
h(a);l(b)?m(k(b),a):n.push({args:b,callback:a});return c}}});
